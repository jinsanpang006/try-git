(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66835b36"],{"917a":function(e,r,t){},b393:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"add-edit"},[t("el-card",{staticClass:"box-card",scopedSlots:e._u([{key:"header",fn:function(){return[t("my-breadcrumb",[e._v("编辑文章")])]},proxy:!0}])},[t("div",[t("el-form",{ref:"myform",attrs:{model:e.form,rules:e.rules,"label-width":"40px","hide-required-asterisk":!0}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{model:{value:e.form.title,callback:function(r){e.$set(e.form,"title",r)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"内容",prop:"content"}},[t("quill-editor",{attrs:{options:e.editorOption},on:{blur:e.quillFn,change:e.quillFn},model:{value:e.form.content,callback:function(r){e.$set(e.form,"content",r)},expression:"form.content"}})],1),t("el-form-item",{attrs:{label:"封面"}},[t("el-radio-group",{on:{change:e.changeCoverType},model:{value:e.form.cover.type,callback:function(r){e.$set(e.form.cover,"type",r)},expression:"form.cover.type"}},[t("el-radio",{attrs:{label:1}},[e._v("单图")]),t("el-radio",{attrs:{label:3}},[e._v("三图")]),t("el-radio",{attrs:{label:0}},[e._v("无图")]),t("el-radio",{attrs:{label:-1}},[e._v("自动")])],1),e.form.cover.type>0?t("div",{key:e.form.cover.type,staticClass:"cover-box"},e._l(e.form.cover.type,(function(r,o){return t("my-cover",{key:o,model:{value:e.form.cover.images[o],callback:function(r){e.$set(e.form.cover.images,o,r)},expression:"form.cover.images[index]"}})})),1):e._e(),-1===e.form.cover.type?t("div",{key:e.form.cover.type,staticClass:"cover-box"},e._l(e.form.cover.images.length+1,(function(r,o){return t("my-cover",{key:o,model:{value:e.form.cover.images[o],callback:function(r){e.$set(e.form.cover.images,o,r)},expression:"form.cover.images[index]"}})})),1):e._e()],1),t("el-form-item",{attrs:{label:"频道",prop:"channel_id"}},[t("my-channels",{model:{value:e.form.channel_id,callback:function(r){e.$set(e.form,"channel_id",r)},expression:"form.channel_id"}})],1),t("el-form-item",{attrs:{label:"标题"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.save(!1)}}},[e._v("修改提交")]),t("el-button",{on:{click:function(r){return e.save(!0)}}},[e._v("存入草稿")])],1)],1)],1)])],1)},n=[],a=(t("96cf"),t("1da1")),i=(t("a753"),t("8096"),t("14e1"),t("8691")),l=t("953d"),c=t("5956"),s=t("5c94"),u={name:"add-edit",data:function(){return{form:{title:"",content:"",channel_id:"",cover:{type:0,images:[]}},channel:[],editorOption:{placeholder:"",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["image"]]}},rules:{title:[{required:!0,message:"请输入标题",trigger:["blur","change"]},{min:5,max:30,message:"长度在 5 到 30 个字符",trigger:["blur","change"]}],content:[{required:!0,message:"请输入内容",trigger:["blur","change"]}],channel_id:[{required:!0,message:"请选择文章频道",trigger:["blur","change"]}]}}},components:{quillEditor:l["quillEditor"],MyChannels:c["a"],MyCover:s["a"]},created:function(){this.loadArticle(this.$route.params.id)},methods:{loadArticle:function(e){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(e);case 2:o=t.sent,console.log(o),r.form=o.data.data;case 5:case"end":return t.stop()}}),t)})))()},save:function(e){var r=this;this.$refs.myform.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=14;break}return t.prev=1,t.next=4,Object(i["c"])(r.$route.params.id,e,r.form);case 4:n=t.sent,r.$message.success("修改成功"),r.$router.push("/articles"),console.log(n),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),r.$message.error("发布失败"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}())},quillFn:function(){this.$refs.myform.validateField("content")},changeCoverType:function(){this.form.cover.images=[]}}},m=u,d=(t("f809"),t("2877")),f=Object(d["a"])(m,o,n,!1,null,"20359c88",null);r["default"]=f.exports},f809:function(e,r,t){"use strict";var o=t("917a"),n=t.n(o);n.a}}]);
//# sourceMappingURL=chunk-66835b36.72e1b15e.js.map
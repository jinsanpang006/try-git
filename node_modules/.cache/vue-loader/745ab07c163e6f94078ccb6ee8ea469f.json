{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\articles\\edit-articles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\articles\\edit-articles.vue","mtime":1607754060104},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602332858735},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\babel-loader\\lib\\index.js","mtime":1602332858756},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602332858735},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js","mtime":1602332873317}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MnDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MnDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcycNCmltcG9ydCB7IGFkZEFydGljbGVzLCBlZGl0QXJ0aWNsZXNJZCwgZWRpdEFydGljbGVzIH0gZnJvbSAnQC9hcGkvYXJ0aWNsZXMuanMnDQppbXBvcnQgeyBxdWlsbEVkaXRvciB9IGZyb20gJ3Z1ZS1xdWlsbC1lZGl0b3InDQppbXBvcnQgTXlDaGFubmVscyBmcm9tICdAL2NvbXBvbmVudHMvbXktY2hhbm5lbHMudnVlJw0KaW1wb3J0IE15Q292ZXIgZnJvbSAnQC9jb21wb25lbnRzL215LWNvdmVyLnZ1ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2FkZC1lZGl0JywNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHsNCiAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICBjb250ZW50OiAnJywNCiAgICAgICAgY2hhbm5lbF9pZDogJycsDQogICAgICAgIGNvdmVyOiB7DQogICAgICAgICAgdHlwZTogMCwNCiAgICAgICAgICBpbWFnZXM6IFtdDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjaGFubmVsOiBbXSwNCiAgICAgIGVkaXRvck9wdGlvbjogew0KICAgICAgICBwbGFjZWhvbGRlcjogJycsDQogICAgICAgIG1vZHVsZXM6IHsNCiAgICAgICAgICB0b29sYmFyOiBbDQogICAgICAgICAgICBbJ2JvbGQnLCAnaXRhbGljJywgJ3VuZGVybGluZScsICdzdHJpa2UnXSwNCiAgICAgICAgICAgIFsnYmxvY2txdW90ZScsICdjb2RlLWJsb2NrJ10sDQogICAgICAgICAgICBbeyBoZWFkZXI6IDEgfSwgeyBoZWFkZXI6IDIgfV0sDQogICAgICAgICAgICBbeyBsaXN0OiAnb3JkZXJlZCcgfSwgeyBsaXN0OiAnYnVsbGV0JyB9XSwNCiAgICAgICAgICAgIFt7IGluZGVudDogJy0xJyB9LCB7IGluZGVudDogJysxJyB9XSwNCiAgICAgICAgICAgIFsnaW1hZ2UnXQ0KICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHRpdGxlOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeagh+mimCcsIHRyaWdnZXI6IFsnYmx1cicsICdjaGFuZ2UnXSB9LA0KICAgICAgICAgIHsgbWluOiA1LCBtYXg6IDMwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDUg5YiwIDMwIOS4quWtl+espicsIHRyaWdnZXI6IFsnYmx1cicsICdjaGFuZ2UnXSB9DQogICAgICAgIF0sDQogICAgICAgIGNvbnRlbnQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5YaF5a65JywgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddIH0NCiAgICAgICAgXSwNCiAgICAgICAgY2hhbm5lbF9pZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmlofnq6DpopHpgZMnLCB0cmlnZ2VyOiBbJ2JsdXInLCAnY2hhbmdlJ10gfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICAvLyDooajljZXmoKHpqowNCg0KICBjb21wb25lbnRzOiB7DQogICAgcXVpbGxFZGl0b3IsDQogICAgTXlDaGFubmVscywNCiAgICBNeUNvdmVyDQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMubG9hZEFydGljbGUodGhpcy4kcm91dGUucGFyYW1zLmlkKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgbG9hZEFydGljbGUgKGlkKSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBlZGl0QXJ0aWNsZXNJZChpZCkNCiAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhLmRhdGENCiAgICB9LA0KICAgIC8vIOS/ruaUueaWh+eroA0KICAgIHNhdmUgKGRyYWZ0KSB7DQogICAgICB0aGlzLiRyZWZzLm15Zm9ybS52YWxpZGF0ZShhc3luYyBmbGFnID0+IHsNCiAgICAgICAgaWYgKGZsYWcpIHsNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZWRpdEFydGljbGVzKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgZHJhZnQsIHRoaXMuZm9ybSkNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYXJ0aWNsZXMnKQ0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+R5biD5aSx6LSlJykNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmoKHpqozlr4zmlofmnKznvJbovpHlmajlhoXlrrkNCiAgICBxdWlsbEZuICgpIHsNCiAgICAgIHRoaXMuJHJlZnMubXlmb3JtLnZhbGlkYXRlRmllbGQoJ2NvbnRlbnQnKQ0KICAgIH0sDQogICAgLy8g5YiH5o2i5pe26K6w5b6X6YeN572uDQogICAgY2hhbmdlQ292ZXJUeXBlICgpIHsNCiAgICAgIHRoaXMuZm9ybS5jb3Zlci5pbWFnZXMgPSBbXQ0KICAgIH0NCiAgfQ0KfQ0KDQo="},{"version":3,"sources":["edit-articles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit-articles.vue","sourceRoot":"src/views/articles","sourcesContent":["<template>\r\n<div class=\"add-edit\">\r\n    <el-card class=\"box-card\">\r\n        <template v-slot:header>\r\n                <my-breadcrumb>编辑文章</my-breadcrumb>\r\n        </template>\r\n        <div>\r\n            <el-form ref='myform' :model=\"form\" :rules=\"rules\" label-width=\"40px\" :hide-required-asterisk='true'>\r\n                <el-form-item  label=\"标题\" prop='title'>\r\n                     <el-input v-model=\"form.title\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item  label=\"内容\" prop=\"content\" >\r\n                     <quill-editor v-model=\"form.content\" :options=\"editorOption\" @blur=\"quillFn\" @change='quillFn' ></quill-editor>\r\n                </el-form-item>\r\n                <el-form-item  label=\"封面\">\r\n                  <!-- 这里的lable 就是单选框 的value值  -->\r\n                      <el-radio-group v-model=\"form.cover.type\" @change=\"changeCoverType\">\r\n                        <el-radio :label=\"1\">单图</el-radio>\r\n                        <el-radio :label=\"3\">三图</el-radio>\r\n                        <el-radio :label=\"0\">无图</el-radio>\r\n                        <el-radio :label=\"-1\">自动</el-radio>\r\n                      </el-radio-group>\r\n                      <!-- 有图 -->\r\n                      <!-- 这个v-model就是images 就是图片路劲的一个数据 index 就是下标拿到当前点的那个imageurl -->\r\n                      <div class=\"cover-box\" v-if=\"form.cover.type > 0\"  :key=\"form.cover.type\">\r\n                          <my-cover\r\n                            v-for=\"(item, index) in form.cover.type\"\r\n                            :key=\"index\"\r\n                            v-model=\"form.cover.images[index]\"\r\n                          >\r\n                          </my-cover>\r\n                      </div>\r\n                      <!-- 自动 -->\r\n                      <!-- 这里的v-for 就是几个url就有几个组件  但比他长度多一  就能永远多点一个 -->\r\n                      <div class=\"cover-box\" v-if=\"form.cover.type === -1\"  :key=\"form.cover.type\">\r\n                        <my-cover\r\n                        v-for=\"(item, index) in (form.cover.images.length+1)\"\r\n                        :key=\"index\"\r\n                        v-model=\"form.cover.images[index]\"\r\n                        >\r\n                        </my-cover>\r\n                      </div>\r\n                </el-form-item>\r\n                <el-form-item  label=\"频道\" prop=\"channel_id\">\r\n                    <my-channels v-model=\"form.channel_id\"></my-channels>\r\n                </el-form-item>\r\n                <el-form-item  label=\"标题\">\r\n                     <el-button type=\"primary\" @click='save(false)' >修改提交</el-button>\r\n                     <el-button @click='save(true)'>存入草稿</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </el-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport 'quill/dist/quill.bubble.css'\r\nimport { addArticles, editArticlesId, editArticles } from '@/api/articles.js'\r\nimport { quillEditor } from 'vue-quill-editor'\r\nimport MyChannels from '@/components/my-channels.vue'\r\nimport MyCover from '@/components/my-cover.vue'\r\nexport default {\r\n  name: 'add-edit',\r\n  data () {\r\n    return {\r\n      form: {\r\n        title: '',\r\n        content: '',\r\n        channel_id: '',\r\n        cover: {\r\n          type: 0,\r\n          images: []\r\n        }\r\n      },\r\n      channel: [],\r\n      editorOption: {\r\n        placeholder: '',\r\n        modules: {\r\n          toolbar: [\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            ['blockquote', 'code-block'],\r\n            [{ header: 1 }, { header: 2 }],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n            [{ indent: '-1' }, { indent: '+1' }],\r\n            ['image']\r\n          ]\r\n        }\r\n      },\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入标题', trigger: ['blur', 'change'] },\r\n          { min: 5, max: 30, message: '长度在 5 到 30 个字符', trigger: ['blur', 'change'] }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入内容', trigger: ['blur', 'change'] }\r\n        ],\r\n        channel_id: [\r\n          { required: true, message: '请选择文章频道', trigger: ['blur', 'change'] }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  // 表单校验\r\n\r\n  components: {\r\n    quillEditor,\r\n    MyChannels,\r\n    MyCover\r\n  },\r\n  created () {\r\n    this.loadArticle(this.$route.params.id)\r\n  },\r\n  methods: {\r\n    async loadArticle (id) {\r\n      const res = await editArticlesId(id)\r\n      console.log(res)\r\n      this.form = res.data.data\r\n    },\r\n    // 修改文章\r\n    save (draft) {\r\n      this.$refs.myform.validate(async flag => {\r\n        if (flag) {\r\n          try {\r\n            const res = await editArticles(this.$route.params.id, draft, this.form)\r\n            this.$message.success('修改成功')\r\n            this.$router.push('/articles')\r\n            console.log(res)\r\n          } catch (err) {\r\n            this.$message.error('发布失败')\r\n            console.log(err)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 校验富文本编辑器内容\r\n    quillFn () {\r\n      this.$refs.myform.validateField('content')\r\n    },\r\n    // 切换时记得重置\r\n    changeCoverType () {\r\n      this.form.cover.images = []\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n    .add-edit /deep/ .ql-editor{\r\n        background-color:skyblue;\r\n        min-height: 300px;\r\n    }\r\n    .add-edit /deep/ .ql-toolbar {\r\n        padding: 0 8px;\r\n    }\r\n    .cover-box {\r\n  display: flex;\r\n  .my-cover {\r\n    margin-right: 20px;\r\n  }\r\n}\r\n</style>\r\n"]}]}
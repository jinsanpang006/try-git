{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\comment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\comment\\index.vue","mtime":1607754060107},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602332858735},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\babel-loader\\lib\\index.js","mtime":1602332858756},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602332858735},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js","mtime":1602332873317}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRDb21tZW50cywgbW9kQ29tbWVudFN0YXR1cyB9IGZyb20gJ0AvYXBpL2NvbW1lbnQuanMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdjb21tZW50JywNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBhZ2U6IDEsIC8vIOW9k+WJjemhtQ0KICAgICAgcGVyX3BhZ2U6IDEwLCAvLyDmr4/pobUxMOadoQ0KICAgICAgdG90YWxfY291bnQ6IDAsIC8vIOaAu+adoeaVsA0KICAgICAgY29tbWVudHM6IFtdIC8vIOiOt+WPluWIsOeahOavj+S4gOmhueaVsOaNriDnroDljZXnsbvlnosg5LiK6Z2i54i25Lyg5a2QICDmlbDmja7nu5nliLBkYXRhICAg5Yip55SoZGF0YeS8oOe7mUVVIOmHjOmdoueahHByb3Ag57uZ6YeM6Z2i57uE5Lu255SoDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmxvYWRDb21tZW50cygpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBsb2FkQ29tbWVudHMgKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0Q29tbWVudHModGhpcy5wYWdlLCB0aGlzLnBlcl9wYWdlKQ0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgIHRoaXMuY29tbWVudHMgPSByZXMuZGF0YS5kYXRhLnJlc3VsdHMNCiAgICAgICAgdGhpcy50b3RhbF9jb3VudCA9IHJlcy5kYXRhLmRhdGEudG90YWxfY291bnQNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9DQogICAgfSwNCiAgICAvLyDliIbpobUNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlIChpbmRleCkgew0KICAgICAgdGhpcy5wYWdlID0gaW5kZXgNCiAgICAgIHRoaXMubG9hZENvbW1lbnRzKCkNCiAgICB9LA0KICAgIC8vIOivhOiuuueKtuaAgQ0KICAgIC8vIOS8oOWFpeeahOWAvCDlkowg6L+U5Zue55qE5YC8IOS4gOaooeS4gOagtw0KICAgIGFzeW5jIHRvZ2dsZUNvbW1lbnQgKGlkLCBzdGF0dXMpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IG1vZENvbW1lbnRTdGF0dXMoaWQudG9TdHJpbmcoKSwgIXN0YXR1cykNCiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpDQogICAgICAgIHRoaXMubG9hZENvbW1lbnRzKCkNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKUnKQ0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/comment","sourcesContent":["<template>\r\n  <div class=\"comment\">\r\n    <!-- 面包屑 -->\r\n    <el-card>\r\n      <template v-slot:header>\r\n        <my-breadcrumb>评论管理</my-breadcrumb>\r\n      </template>\r\n    </el-card>\r\n      <!-- 获取到的每一项数据 简单类型 上面父传子  数据给到data   利用data传给EU 里面的prop 给里面组件用 -->\r\n      <!-- 表格 -->\r\n    <el-table :data=\"comments\">\r\n      <el-table-column label=\"文章标题\" prop=\"title\"></el-table-column>\r\n      <el-table-column label=\"总评论数\" prop=\"total_comment_count\"></el-table-column>\r\n      <el-table-column label=\"粉丝评论数\" prop=\"fans_comment_count\"></el-table-column>\r\n      <el-table-column label=\"评论状态\">\r\n        <template v-slot:default='obj'>\r\n          {{obj.row.comment_status ? '关闭':'开启'}}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template v-slot:default='obj'>\r\n          <el-button @click=\"toggleComment(obj.row.id,obj.row.comment_status)\" v-if=\"obj.row.comment_status\"  type=\"success\">打开评论</el-button>\r\n          <el-button @click=\"toggleComment(obj.row.id,obj.row.comment_status)\" v-else type=\"danger\">关闭评论</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n      @current-change=\"handleCurrentChange\"\r\n      layout=\"prev, pager, next\"\r\n      background\r\n      :page-size=\"per_page\"\r\n      :current-page=\"page\"\r\n      :total=\"total_count\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getComments, modCommentStatus } from '@/api/comment.js'\r\nexport default {\r\n  name: 'comment',\r\n  data () {\r\n    return {\r\n      page: 1, // 当前页\r\n      per_page: 10, // 每页10条\r\n      total_count: 0, // 总条数\r\n      comments: [] // 获取到的每一项数据 简单类型 上面父传子  数据给到data   利用data传给EU 里面的prop 给里面组件用\r\n    }\r\n  },\r\n  created () {\r\n    this.loadComments()\r\n  },\r\n  methods: {\r\n    async loadComments () {\r\n      try {\r\n        const res = await getComments(this.page, this.per_page)\r\n        console.log(res)\r\n        this.comments = res.data.data.results\r\n        this.total_count = res.data.data.total_count\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n    // 分页\r\n    handleCurrentChange (index) {\r\n      this.page = index\r\n      this.loadComments()\r\n    },\r\n    // 评论状态\r\n    // 传入的值 和 返回的值 一模一样\r\n    async toggleComment (id, status) {\r\n      try {\r\n        const res = await modCommentStatus(id.toString(), !status)\r\n        // console.log(res)\r\n        this.$message.success('操作成功')\r\n        this.loadComments()\r\n      } catch (err) {\r\n        this.$message.error('操作失败')\r\n        console.log(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}
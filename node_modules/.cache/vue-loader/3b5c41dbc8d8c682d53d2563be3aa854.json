{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\articles\\add-articles.vue?vue&type=style&index=0&id=349d3d5e&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\src\\views\\articles\\add-articles.vue","mtime":1607754060103},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\css-loader\\dist\\cjs.js","mtime":1602332871931},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1602332873317},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\postcss-loader\\src\\index.js","mtime":1602332872304},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\less-loader\\dist\\cjs.js","mtime":1602332955985},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1602332858735},{"path":"C:\\Users\\Administrator\\Desktop\\vue_zt\\node_modules\\vue-loader\\lib\\index.js","mtime":1602332873317}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgogICAgLmFkZC1hcnRpY2xlIC9kZWVwLyAucWwtZWRpdG9yewogICAgICAgIGJhY2tncm91bmQtY29sb3I6c2t5Ymx1ZTsKICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDsKICAgIH0KICAgIC5hZGQtYXJ0aWNsZSAvZGVlcC8gLnFsLXRvb2xiYXIgewogICAgICAgIHBhZGRpbmc6IDAgOHB4OwogICAgfQogICAgLmNvdmVyLWJveCB7CiAgZGlzcGxheTogZmxleDsKICAubXktY292ZXIgewogICAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogIH0KfQo="},{"version":3,"sources":["add-articles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-articles.vue","sourceRoot":"src/views/articles","sourcesContent":["<template>\r\n<div class=\"add-article\">\r\n    <el-card class=\"box-card\">\r\n        <template v-slot:header>\r\n                <my-breadcrumb>发布文章</my-breadcrumb>\r\n        </template>\r\n        <div>\r\n            <el-form ref='myform' :model=\"form\" :rules=\"rules\" label-width=\"40px\" :hide-required-asterisk='true'>\r\n                <el-form-item  label=\"标题\" prop='title'>\r\n                     <el-input v-model=\"form.title\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item  label=\"内容\" prop=\"content\" >\r\n                     <quill-editor v-model=\"form.content\" :options=\"editorOption\" @blur=\"quillFn\" @change='quillFn' ></quill-editor>\r\n                </el-form-item>\r\n                <el-form-item  label=\"封面\">\r\n                  <!-- 这里的lable 就是单选框 的value值  -->\r\n                      <el-radio-group v-model=\"form.cover.type\" @change=\"changeCoverType\">\r\n                        <el-radio :label=\"1\">单图</el-radio>\r\n                        <el-radio :label=\"3\">三图</el-radio>\r\n                        <el-radio :label=\"0\">无图</el-radio>\r\n                        <el-radio :label=\"-1\">自动</el-radio>\r\n                      </el-radio-group>\r\n                      <!-- 有图 -->\r\n                      <!-- 这个v-model就是images 就是图片路劲的一个数据 index 就是下标拿到当前点的那个imageurl -->\r\n                      <div class=\"cover-box\" v-if=\"form.cover.type > 0\"  :key=\"form.cover.type\">\r\n                          <my-cover\r\n                            v-for=\"(item, index) in form.cover.type\"\r\n                            :key=\"index\"\r\n                            v-model=\"form.cover.images[index]\"\r\n                          >\r\n                          </my-cover>\r\n                      </div>\r\n                      <!-- 自动 -->\r\n                      <!-- 这里的v-for 就是几个url就有几个组件  但比他长度多一  就能永远多点一个 -->\r\n                      <div class=\"cover-box\" v-if=\"form.cover.type === -1\"  :key=\"form.cover.type\">\r\n                        <my-cover\r\n                        v-for=\"(item, index) in (form.cover.images.length+1)\"\r\n                        :key=\"index\"\r\n                        v-model=\"form.cover.images[index]\"\r\n                        >\r\n                        </my-cover>\r\n                      </div>\r\n                </el-form-item>\r\n                <el-form-item  label=\"频道\" prop=\"channel_id\">\r\n                    <my-channels v-model=\"form.channel_id\"></my-channels>\r\n                </el-form-item>\r\n                <el-form-item  label=\"标题\">\r\n                     <el-button type=\"primary\" @click='add(false)' >发表</el-button>\r\n                     <el-button @click='add(true)'>存入草稿</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </el-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport 'quill/dist/quill.bubble.css'\r\nimport { addArticles } from '@/api/articles.js'\r\nimport { quillEditor } from 'vue-quill-editor'\r\nimport MyChannels from '@/components/my-channels.vue'\r\nimport MyCover from '@/components/my-cover.vue'\r\nexport default {\r\n  name: 'add-article',\r\n  data () {\r\n    return {\r\n      form: {\r\n        title: '',\r\n        content: '',\r\n        channel_id: '',\r\n        cover: {\r\n          type: 0,\r\n          images: []\r\n        }\r\n      },\r\n      channel: [],\r\n      editorOption: {\r\n        placeholder: '',\r\n        modules: {\r\n          toolbar: [\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            ['blockquote', 'code-block'],\r\n            [{ header: 1 }, { header: 2 }],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n            [{ indent: '-1' }, { indent: '+1' }],\r\n            ['image']\r\n          ]\r\n        }\r\n      },\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入标题', trigger: ['blur', 'change'] },\r\n          { min: 5, max: 30, message: '长度在 5 到 30 个字符', trigger: ['blur', 'change'] }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入内容', trigger: ['blur', 'change'] }\r\n        ],\r\n        channel_id: [\r\n          { required: true, message: '请选择文章频道', trigger: ['blur', 'change'] }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  // 表单校验\r\n\r\n  components: {\r\n    quillEditor,\r\n    MyChannels,\r\n    MyCover\r\n  },\r\n  methods: {\r\n    // 发表文章\r\n    add (draft) {\r\n      this.$refs.myform.validate(async flag => {\r\n        if (flag) {\r\n          try {\r\n            const res = await addArticles(draft, this.form)\r\n            this.$message.success('发布成功')\r\n            this.$router.push('/articles')\r\n            console.log(res)\r\n          } catch (err) {\r\n            this.$message.error('发布失败')\r\n            console.log(err)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 校验富文本编辑器内容\r\n    quillFn () {\r\n      this.$refs.myform.validateField('content')\r\n    },\r\n    // 切换时记得重置\r\n    changeCoverType () {\r\n      this.form.cover.images = []\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n    .add-article /deep/ .ql-editor{\r\n        background-color:skyblue;\r\n        min-height: 300px;\r\n    }\r\n    .add-article /deep/ .ql-toolbar {\r\n        padding: 0 8px;\r\n    }\r\n    .cover-box {\r\n  display: flex;\r\n  .my-cover {\r\n    margin-right: 20px;\r\n  }\r\n}\r\n</style>\r\n"]}]}